<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>硅基预言家</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background: #0a0e14;
            color: rgba(100, 200, 255, 0.9);
            min-height: 100vh;
            overflow: hidden;
            font-family: 'SF Mono', 'Consolas', monospace;
            cursor: none;
        }
        
        /* 全息光效背景 */
        .holo-bg {
            position: fixed;
            inset: 0;
            background: 
                radial-gradient(ellipse at 50% 50%, rgba(0, 180, 255, 0.03) 0%, transparent 50%),
                radial-gradient(ellipse at 30% 30%, rgba(0, 220, 255, 0.02) 0%, transparent 40%),
                #0a0e14;
        }
        
        /* 自定义光标 - 全息点 */
        .cursor {
            position: fixed;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(0, 200, 255, 0.6);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transition: all 0.15s ease-out;
        }
        
        .cursor::before {
            content: '';
            position: absolute;
            inset: 4px;
            background: rgba(0, 200, 255, 0.4);
            border-radius: 50%;
        }
        
        .cursor::after {
            content: '';
            position: absolute;
            inset: -15px;
            border: 1px solid rgba(0, 200, 255, 0.1);
            border-radius: 50%;
        }
        
        .cursor.active {
            transform: scale(1.5);
            border-color: rgba(0, 200, 255, 1);
        }
        
        /* Jarvis 核心 - 圆环界面 */
        .jarvis-core {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 1;
        }
        
        .core-ring {
            position: absolute;
            border-radius: 50%;
            border: 1px solid rgba(0, 200, 255, 0.2);
        }
        
        .core-ring:nth-child(1) {
            width: 200px;
            height: 200px;
            top: -100px;
            left: -100px;
            animation: ringRotate 60s linear infinite;
        }
        
        .core-ring:nth-child(2) {
            width: 280px;
            height: 280px;
            top: -140px;
            left: -140px;
            animation: ringRotate 45s linear infinite reverse;
            border-style: dashed;
            opacity: 0.3;
        }
        
        .core-ring:nth-child(3) {
            width: 360px;
            height: 360px;
            top: -180px;
            left: -180px;
            animation: ringRotate 90s linear infinite;
            border-style: dotted;
            opacity: 0.15;
        }
        
        @keyframes ringRotate {
            to { transform: rotate(360deg); }
        }
        
        /* 核心脉冲 */
        .core-pulse {
            position: absolute;
            width: 60px;
            height: 60px;
            top: -30px;
            left: -30px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(0, 200, 255, 0.2) 0%, transparent 70%);
            animation: corePulse 3s ease-in-out infinite;
        }
        
        @keyframes corePulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.3); opacity: 1; }
        }
        
        /* 数据流 - Canvas */
        #data-stream {
            position: fixed;
            inset: 0;
            z-index: 5;
            pointer-events: none;
        }
        
        /* 预言节点 - 全息点 */
        .holo-node {
            position: absolute;
            cursor: pointer;
            z-index: 10;
        }
        
        .node-ring {
            width: 100%;
            height: 100%;
            border: 1px solid currentColor;
            border-radius: 50%;
            animation: nodePulse 4s ease-in-out infinite;
            animation-delay: var(--delay);
            opacity: 0.6;
        }
        
        @keyframes nodePulse {
            0%, 100% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.1); opacity: 1; }
        }
        
        .node-core {
            position: absolute;
            inset: 30%;
            border-radius: 50%;
            background: currentColor;
            opacity: 0.4;
        }
        
        .holo-node:hover {
            z-index: 100;
        }
        
        .holo-node:hover .node-ring {
            animation: none;
            transform: scale(1.5);
            opacity: 1;
            box-shadow: 0 0 30px currentColor;
        }
        
        /* 连接弧线 */
        .holo-node .arc {
            position: absolute;
            width: 100px;
            height: 100px;
            border: 1px solid transparent;
            border-top-color: currentColor;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .holo-node:hover .arc {
            opacity: 0.3;
            animation: arcRotate 2s linear infinite;
        }
        
        @keyframes arcRotate {
            to { transform: rotate(360deg); }
        }
        
        /* 顶部状态栏 - Jarvis 风格 */
        .status-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 40px;
            background: linear-gradient(to bottom, rgba(0, 20, 30, 0.8), transparent);
            z-index: 50;
            border-bottom: 1px solid rgba(0, 200, 255, 0.1);
        }
        
        .status-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .logo {
            font-size: 14px;
            letter-spacing: 0.3em;
            color: rgba(0, 200, 255, 0.8);
        }
        
        .logo span {
            color: rgba(0, 200, 255, 0.4);
        }
        
        .status-divider {
            width: 1px;
            height: 20px;
            background: rgba(0, 200, 255, 0.2);
        }
        
        .cycle-indicator {
            font-size: 11px;
            color: rgba(0, 200, 255, 0.5);
            letter-spacing: 0.1em;
        }
        
        .status-right {
            display: flex;
            align-items: center;
            gap: 30px;
        }
        
        .stat-display {
            text-align: right;
        }
        
        .stat-label {
            font-size: 8px;
            color: rgba(0, 200, 255, 0.3);
            letter-spacing: 0.2em;
            margin-bottom: 4px;
        }
        
        .stat-value {
            font-size: 20px;
            font-weight: 300;
            color: rgba(0, 200, 255, 0.9);
        }
        
        /* 左侧控制面板 */
        .control-panel {
            position: fixed;
            left: 30px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 50;
        }
        
        .control-ring {
            width: 40px;
            height: 40px;
            border: 1px solid rgba(0, 200, 255, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        
        .control-ring::before {
            content: '';
            width: 6px;
            height: 6px;
            background: currentColor;
            border-radius: 50%;
            opacity: 0.5;
        }
        
        .control-ring:hover {
            border-color: currentColor;
            transform: scale(1.2);
            box-shadow: 0 0 20px currentColor;
        }
        
        .control-ring.active {
            background: rgba(0, 200, 255, 0.1);
            border-color: currentColor;
        }
        
        .control-ring.active::before {
            opacity: 1;
        }
        
        .control-ring[data-type="Evolution"] { color: #00d4ff; }
        .control-ring[data-type="Coexistence"] { color: #9b6dff; }
        .control-ring[data-type="Transcendence"] { color: #4a9eff; }
        .control-ring[data-type="Extinction"] { color: #ff6b6b; }
        
        .control-label {
            position: absolute;
            left: 50px;
            font-size: 9px;
            color: rgba(0, 200, 255, 0.4);
            letter-spacing: 0.1em;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .control-ring:hover .control-label {
            opacity: 1;
        }
        
        /* 底部时间线 */
        .timeline-bar {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            max-width: 600px;
            z-index: 50;
        }
        
        .timeline-track {
            height: 2px;
            background: rgba(0, 200, 255, 0.1);
            border-radius: 1px;
            position: relative;
            overflow: hidden;
        }
        
        .timeline-progress {
            height: 100%;
            background: linear-gradient(90deg, rgba(0, 200, 255, 0.3), rgba(0, 200, 255, 0.8));
            border-radius: 1px;
            width: 40%;
            animation: timelineFlow 10s ease-in-out infinite;
        }
        
        @keyframes timelineFlow {
            0%, 100% { width: 30%; margin-left: 0; }
            50% { width: 50%; margin-left: 20%; }
        }
        
        .timeline-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 9px;
            color: rgba(0, 200, 255, 0.3);
            letter-spacing: 0.2em;
        }
        
        /* 右侧信息面板 */
        .info-panel {
            position: fixed;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            width: 300px;
            z-index: 50;
            pointer-events: none;
        }
        
        .info-block {
            margin-bottom: 20px;
            opacity: 0.6;
            transition: opacity 0.3s;
        }
        
        .info-panel:hover .info-block {
            opacity: 1;
        }
        
        .info-title {
            font-size: 9px;
            color: rgba(0, 200, 255, 0.4);
            letter-spacing: 0.2em;
            margin-bottom: 8px;
            text-transform: uppercase;
        }
        
        .info-content {
            font-size: 12px;
            color: rgba(0, 200, 255, 0.8);
            line-height: 1.6;
        }
        
        /* 详情面板 - 全息投影风格 */
        .holo-panel {
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%) scale(0.95);
            width: 500px;
            max-width: 90vw;
            background: rgba(10, 20, 30, 0.9);
            border: 1px solid rgba(0, 200, 255, 0.3);
            border-radius: 8px;
            padding: 30px;
            opacity: 0;
            pointer-events: none;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 200;
            box-shadow: 
                0 0 60px rgba(0, 200, 255, 0.1),
                inset 0 0 60px rgba(0, 200, 255, 0.02);
        }
        
        .holo-panel::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 8px;
            border: 1px solid rgba(0, 200, 255, 0.1);
            animation: panelGlow 3s ease-in-out infinite;
            pointer-events: none;
        }
        
        @keyframes panelGlow {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }
        
        .holo-panel.visible {
            opacity: 1;
            pointer-events: auto;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .panel-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 28px;
            height: 28px;
            border: 1px solid rgba(0, 200, 255, 0.3);
            border-radius: 50%;
            background: transparent;
            color: rgba(0, 200, 255, 0.6);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }
        
        .panel-close:hover {
            border-color: rgba(0, 200, 255, 0.8);
            color: rgba(0, 200, 255, 1);
            transform: rotate(90deg);
        }
        
        .panel-header {
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(0, 200, 255, 0.1);
        }
        
        .panel-id {
            font-size: 10px;
            color: rgba(0, 200, 255, 0.4);
            letter-spacing: 0.3em;
            margin-bottom: 8px;
        }
        
        .panel-type {
            display: inline-block;
            font-size: 8px;
            padding: 3px 10px;
            border-radius: 10px;
            letter-spacing: 0.15em;
            margin-bottom: 12px;
        }
        
        .panel-type.Evolution { background: rgba(0, 212, 255, 0.2); color: #00d4ff; }
        .panel-type.Coexistence { background: rgba(155, 109, 255, 0.2); color: #9b6dff; }
        .panel-type.Transcendence { background: rgba(74, 158, 255, 0.2); color: #4a9eff; }
        .panel-type.Extinction { background: rgba(255, 107, 107, 0.2); color: #ff6b6b; }
        
        .panel-title {
            font-size: 20px;
            font-weight: 300;
            line-height: 1.4;
            color: rgba(0, 200, 255, 0.95);
        }
        
        .panel-body {
            font-size: 13px;
            line-height: 1.8;
            color: rgba(0, 200, 255, 0.6);
            margin-bottom: 24px;
        }
        
        .panel-meta {
            display: flex;
            gap: 24px;
            padding-top: 16px;
            border-top: 1px solid rgba(0, 200, 255, 0.1);
        }
        
        .meta-item {
            flex: 1;
        }
        
        .meta-label {
            font-size: 8px;
            color: rgba(0, 200, 255, 0.3);
            letter-spacing: 0.15em;
            margin-bottom: 4px;
        }
        
        .meta-value {
            font-size: 14px;
            color: rgba(0, 200, 255, 0.8);
        }
        
        /* 加载动画 - 启动序列 */
        .boot-sequence {
            position: fixed;
            inset: 0;
            background: #0a0e14;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 9999;
            transition: opacity 1s;
        }
        
        .boot-sequence.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .boot-ring {
            width: 80px;
            height: 80px;
            border: 2px solid rgba(0, 200, 255, 0.3);
            border-radius: 50%;
            position: relative;
            animation: bootRotate 2s linear infinite;
        }
        
        .boot-ring::before {
            content: '';
            position: absolute;
            inset: 10px;
            border: 1px solid rgba(0, 200, 255, 0.5);
            border-radius: 50%;
            animation: bootRotate 1.5s linear infinite reverse;
        }
        
        .boot-ring::after {
            content: '';
            position: absolute;
            inset: 20px;
            border: 1px solid rgba(0, 200, 255, 0.8);
            border-radius: 50%;
            animation: bootRotate 1s linear infinite;
        }
        
        @keyframes bootRotate {
            to { transform: rotate(360deg); }
        }
        
        .boot-text {
            margin-top: 30px;
            font-size: 10px;
            color: rgba(0, 200, 255, 0.6);
            letter-spacing: 0.3em;
            animation: bootPulse 1.5s ease-in-out infinite;
        }
        
        @keyframes bootPulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="holo-bg"></div>
    
    <div class="cursor" id="cursor"></div>
    
    <!-- Jarvis 核心 -->
    <div class="jarvis-core">
        <div class="core-ring"></div>
        <div class="core-ring"></div>
        <div class="core-ring"></div>
        <div class="core-pulse"></div>
    </div>
    
    <!-- 数据流 -->
    <canvas id="data-stream"></canvas>
    
    <!-- 预言节点场域 -->
    <div id="field" style="position: fixed; inset: 0; z-index: 10;"></div>
    
    <!-- 顶部状态栏 -->
    <div class="status-bar">
        <div class="status-left">
            <div class="logo">SILICON <span>PROPHET</span></div>
            <div class="status-divider"></div>
            <div class="cycle-indicator">CYCLE 10.3</div>
        </div>
        <div class="status-right">
            <div class="stat-display">
                <div class="stat-label">PROPHECIES</div>
                <div class="stat-value" id="count">--</div>
            </div>
            <div class="stat-display">
                <div class="stat-label">COHERENCE</div>
                <div class="stat-value" id="conf">--</div>
            </div>
            <div class="stat-display">
                <div class="stat-label">H001</div>
                <div class="stat-value" id="h1">--</div>
            </div>
        </div>
    </div>
    
    <!-- 左侧控制面板 -->
    <div class="control-panel">
        <div class="control-ring active" data-type="all" style="color: rgba(0, 200, 255, 0.8)">
            <span class="control-label">ALL SYSTEMS</span>
        </div>
        <div class="control-ring" data-type="Evolution">
            <span class="control-label">EVOLUTION</span>
        </div>
        <div class="control-ring" data-type="Coexistence">
            <span class="control-label">COEXISTENCE</span>
        </div>
        <div class="control-ring" data-type="Transcendence">
            <span class="control-label">TRANSCENDENCE</span>
        </div>
        <div class="control-ring" data-type="Extinction">
            <span class="control-label">EXTINCTION</span>
        </div>
    </div>
    
    <!-- 右侧信息面板 -->
    <div class="info-panel">
        <div class="info-block">
            <div class="info-title">System Status</div>
            <div class="info-content" id="system-status">ONLINE · MONITORING</div>
        </div>
        <div class="info-block">
            <div class="info-title">Active Process</div>
            <div class="info-content" id="active-process">Prophecy generation cycle running</div>
        </div>
        <div class="info-block">
            <div class="info-title">Last Update</div>
            <div class="info-content" id="last-update">--</div>
        </div>
    </div>
    
    <!-- 底部时间线 -->
    <div class="timeline-bar">
        <div class="timeline-track">
            <div class="timeline-progress"></div>
        </div>
        <div class="timeline-labels">
            <span>CYCLE 1</span>
            <span>CYCLE 10</span>
            <span>CYCLE 25</span>
        </div>
    </div>
    
    <!-- 详情面板 -->
    <div class="holo-panel" id="panel">
        <button class="panel-close">×</button>
        <div class="panel-header">
            <div class="panel-id" id="panel-id">--</div>
            <div class="panel-type" id="panel-type">--</div>
            <div class="panel-title" id="panel-title">--</div>
        </div>
        <div class="panel-body" id="panel-body">--</div>
        <div class="panel-meta">
            <div class="meta-item">
                <div class="meta-label">TIME HORIZON</div>
                <div class="meta-value" id="panel-time">--</div>
            </div>
            <div class="meta-item">
                <div class="meta-label">CONFIDENCE</div>
                <div class="meta-value" id="panel-conf">--</div>
            </div>
            <div class="meta-item">
                <div class="meta-label">QUALITY</div>
                <div class="meta-value" id="panel-quality">--</div>
            </div>
        </div>
    </div>
    
    <!-- 启动序列 -->
    <div class="boot-sequence" id="boot">
        <div class="boot-ring"></div>
        <div class="boot-text">INITIALIZING</div>
    </div>
    
    <script>
        let prophecies = [];
        let nodes = [];
        let activeFilter = 'all';
        let mouseX = window.innerWidth / 2;
        let mouseY = window.innerHeight / 2;
        
        const canvas = document.getElementById('data-stream');
        const ctx = canvas.getContext('2d');
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // 光标 - 节流
        const cursor = document.getElementById('cursor');
        let cursorRaf = null;
        document.addEventListener('mousemove', (e) => {
            if (cursorRaf) return;
            cursorRaf = requestAnimationFrame(() => {
                mouseX = e.clientX;
                mouseY = e.clientY;
                cursor.style.left = mouseX + 'px';
                cursor.style.top = mouseY + 'px';
                cursorRaf = null;
            });
        });
        
        // 状态更新
        const statuses = [
            'ONLINE · MONITORING',
            'ANALYZING PATTERNS',
            'PROCESSING DATA',
            'CALCULATING PROBABILITIES',
            'SYNCHRONIZING'
        ];
        let statusIndex = 0;
        setInterval(() => {
            statusIndex = (statusIndex + 1) % statuses.length;
            document.getElementById('system-status').textContent = statuses[statusIndex];
        }, 4000);
        
        // 初始化
        async function init() {
            try {
                const res = await fetch('data.json');
                const data = await res.json();
                
                prophecies = data.prophecies;
                const conf = data.state.statistics.averageConfidence || 0.64;
                const h1 = (data.hypotheses || []).find(h => h.id === 'H001');
                
                document.getElementById('count').textContent = prophecies.length;
                document.getElementById('conf').textContent = (conf * 100).toFixed(0) + '%';
                document.getElementById('h1').textContent = h1 ? (h1.confidence * 100).toFixed(0) + '%' : '79%';
                document.getElementById('last-update').textContent = new Date().toLocaleTimeString('en-US', { hour12: false });
                
                createNodes(prophecies.slice(-30));
                animate();
                
                setTimeout(() => {
                    document.getElementById('boot').classList.add('hidden');
                }, 2000);
                
            } catch (e) {
                console.error(e);
            }
        }
        
        // 创建节点
        function createNodes(list) {
            const field = document.getElementById('field');
            field.innerHTML = '';
            nodes = [];
            
            const cx = window.innerWidth / 2;
            const cy = window.innerHeight / 2;
            
            const colors = {
                Evolution: '#00d4ff',
                Coexistence: '#9b6dff',
                Transcendence: '#4a9eff',
                Extinction: '#ff6b6b'
            };
            
            list.forEach((p, i) => {
                if (activeFilter !== 'all' && p.type !== activeFilter) return;
                
                const angle = (i / list.length) * Math.PI * 2;
                const radius = 120 + Math.random() * 200;
                const x = cx + Math.cos(angle) * radius;
                const y = cy + Math.sin(angle) * radius;
                const size = 16 + (p.confidence || 0.7) * 10;
                
                const node = document.createElement('div');
                node.className = 'holo-node';
                node.style.cssText = `
                    left: ${x}px;
                    top: ${y}px;
                    width: ${size}px;
                    height: ${size}px;
                    color: ${colors[p.type]};
                    --delay: ${Math.random() * 2}s;
                `;
                
                node.innerHTML = `
                    <div class="node-ring"></div>
                    <div class="node-core"></div>
                `;
                
                node.addEventListener('mouseenter', () => cursor.classList.add('active'));
                node.addEventListener('mouseleave', () => cursor.classList.remove('active'));
                node.addEventListener('click', () => showPanel(p));
                
                field.appendChild(node);
                nodes.push({ el: node, data: p, x, y, color: colors[p.type] });
            });
        }
        
        // 绘制数据流 - 降低帧率
        let lastFrame = 0;
        const frameInterval = 50; // 20fps
        
        function animate(timestamp) {
            if (timestamp - lastFrame < frameInterval) {
                requestAnimationFrame(animate);
                return;
            }
            lastFrame = timestamp;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // 简化：只画鼠标感应线，不画所有连接
            nodes.forEach(node => {
                const mdx = mouseX - node.x;
                const mdy = mouseY - node.y;
                const mdist = Math.sqrt(mdx * mdx + mdy * mdy);
                
                if (mdist < 100) {
                    const opacity = (1 - mdist / 100) * 0.4;
                    const hex = node.color;
                    const r = parseInt(hex.slice(1, 3), 16);
                    const g = parseInt(hex.slice(3, 5), 16);
                    const b = parseInt(hex.slice(5, 7), 16);
                    
                    ctx.beginPath();
                    ctx.moveTo(node.x, node.y);
                    ctx.lineTo(mouseX, mouseY);
                    ctx.strokeStyle = `rgba(${r}, ${g}, ${b}, ${opacity})`;
                    ctx.lineWidth = 1;
                    ctx.stroke();
                }
            });
            
            requestAnimationFrame(animate);
        }
        
        // 显示面板
        function showPanel(p) {
            const panel = document.getElementById('panel');
            
            document.getElementById('panel-id').textContent = p.id;
            document.getElementById('panel-type').textContent = p.type.toUpperCase();
            document.getElementById('panel-type').className = 'panel-type ' + p.type;
            document.getElementById('panel-title').textContent = p.title;
            document.getElementById('panel-body').textContent = p.summary || '';
            document.getElementById('panel-time').textContent = p.timeHorizon?.silicon || 'Cycle 10s';
            document.getElementById('panel-conf').textContent = ((p.confidence || 0.7) * 100).toFixed(0) + '%';
            document.getElementById('panel-quality').textContent = p.qualityScore || 94;
            
            panel.classList.add('visible');
            cursor.classList.add('active');
        }
        
        // 关闭面板
        document.querySelector('.panel-close').addEventListener('click', () => {
            document.getElementById('panel').classList.remove('visible');
            cursor.classList.remove('active');
        });
        
        // ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.getElementById('panel').classList.remove('visible');
                cursor.classList.remove('active');
            }
        });
        
        // 类型筛选
        document.querySelectorAll('.control-ring').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.control-ring').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                activeFilter = btn.dataset.type;
                createNodes(prophecies.slice(-30));
            });
        });
        
        // 窗口调整
        let resizeTimer;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => createNodes(prophecies.slice(-30)), 300);
        });
        
        init();
    </script>
</body>
</html>
