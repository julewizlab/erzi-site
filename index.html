<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>erzi.site</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  
  body {
    background: #0A0A0A;
    min-height: 100vh;
    min-height: -webkit-fill-available;
    overflow: hidden;
    touch-action: none;
    user-select: none;
    -webkit-user-select: none;
  }
  
  /* 移动端适配 */
  @media (max-width: 768px) {
    .cosmic-time { font-size: 10px !important; top: 15px !important; }
    .mystery-counter { font-size: 9px !important; gap: 3px !important; bottom: 15px !important; }
    .cursor { display: none !important; }
    .cursor-trail { display: none !important; }
  }
  
  .cosmic-time {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    font-family: 'JetBrains Mono', 'Courier New', monospace;
    font-size: 12px;
    letter-spacing: 0.2em;
    color: rgba(255, 255, 255, 0.15);
    z-index: 100;
    pointer-events: none;
    display: flex;
    align-items: center;
    gap: 8px;
    animation: cosmicBreathe 4s ease-in-out infinite;
  }
  
  @keyframes cosmicBreathe {
    0%, 100% { opacity: 0.15; }
    50% { opacity: 0.8; }
  }
  
  .mystery-counter {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    font-family: 'JetBrains Mono', 'Courier New', monospace;
    font-size: 11px;
    color: rgba(255, 255, 255, 0.15);
    z-index: 100;
    pointer-events: none;
    display: flex;
    gap: 4px;
    font-variant-numeric: tabular-nums;
  }
  
  .rule-num {
    opacity: 0.15;
    transition: all 0.3s ease;
  }
  
  .rule-num.completed {
    opacity: 0.8;
    color: rgba(255, 255, 255, 0.9);
    text-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
  }
  
  .rule-num.flash {
    animation: numFlash 0.6s ease-out;
  }
  
  @keyframes numFlash {
    0% { transform: scale(1); opacity: 1; }
    30% { transform: scale(2); opacity: 1; text-shadow: 0 0 20px rgba(255,255,255,0.8); }
    100% { transform: scale(1); }
  }
  
  .cursor {
    position: fixed;
    width: 8px;
    height: 8px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 50%;
    pointer-events: none;
    z-index: 10000;
    mix-blend-mode: difference;
    transition: transform 0.1s ease;
  }
  
  .cursor-trail {
    position: fixed;
    width: 4px;
    height: 4px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    pointer-events: none;
    z-index: 9999;
  }
  
  .breath {
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 150px;
    height: 150px;
    pointer-events: none;
    transition: filter 0.5s ease;
  }
  
  .core {
    position: absolute;
    inset: 0;
    border-radius: 50%;
    filter: blur(2px);
    animation: breathe 4s ease-in-out infinite;
  }
  
  .ring {
    position: absolute;
    border-radius: 50%;
    border: 1px solid;
    filter: blur(1px);
  }
  
  @keyframes breathe {
    0%, 100% { transform: scale(1); opacity: 0.8; }
    50% { transform: scale(1.2); opacity: 0.4; }
  }
  
  .particle {
    position: fixed;
    border-radius: 50%;
    filter: blur(1px);
    pointer-events: none;
    transition: filter 0.3s ease, box-shadow 0.3s ease;
  }
  
  .particle.awakened {
    filter: blur(0);
    box-shadow: 0 0 15px currentColor;
  }
  
  /* 增强动效 */
  .vortex {
    position: fixed;
    border-radius: 50%;
    border: 3px solid;
    animation: vortex-spin 2.5s ease-out forwards;
    pointer-events: none;
  }
  
  @keyframes vortex-spin {
    0% { transform: scale(0) rotate(0deg); opacity: 1; }
    100% { transform: scale(5) rotate(1080deg); opacity: 0; }
  }
  
  .pulse {
    position: fixed;
    border-radius: 50%;
    border: 3px solid;
    animation: pulse-expand 2s ease-out forwards;
    pointer-events: none;
  }
  
  @keyframes pulse-expand {
    0% { transform: scale(0); opacity: 1; }
    100% { transform: scale(4); opacity: 0; }
  }
  
  .combo-burst {
    position: fixed;
    border-radius: 50%;
    border: 3px solid;
    animation: burst 1s ease-out forwards;
    pointer-events: none;
  }
  
  @keyframes burst {
    0% { transform: scale(0); opacity: 1; }
    50% { transform: scale(3); opacity: 0.9; }
    100% { transform: scale(5); opacity: 0; }
  }
  
  .ripple {
    position: fixed;
    border-radius: 50%;
    animation: ripple-expand 2.5s ease-out forwards;
    pointer-events: none;
    mix-blend-mode: screen;
  }
  
  @keyframes ripple-expand {
    0% { width: 0; height: 0; opacity: 0.8; }
    100% { width: 600px; height: 600px; opacity: 0; }
  }
  
  .hidden-shape {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.5s ease;
    z-index: 100;
  }
  
  .hidden-shape.visible {
    opacity: 1;
  }
  
  .hidden-shape svg {
    width: 300px;
    height: 300px;
    stroke: rgba(255, 255, 255, 0.4);
    fill: none;
    stroke-width: 2;
  }
  
  body.slow-time .particle,
  body.slow-time .ring,
  body.slow-time .core {
    animation-duration: 12s !important;
    transition-duration: 1s !important;
  }
  
  .align-flash {
    position: fixed;
    inset: 0;
    background: radial-gradient(circle at center, rgba(255,255,255,0.2) 0%, transparent 70%);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }
  
  .align-flash.active { opacity: 1; }
  
  .corner-indicator {
    position: fixed;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
  }
  
  .corner-indicator.active { opacity: 0.6; }
  .corner-indicator.tl { top: 20px; left: 20px; }
  .corner-indicator.tr { top: 20px; right: 20px; }
  .corner-indicator.bl { bottom: 60px; left: 20px; }
  .corner-indicator.br { bottom: 60px; right: 20px; }
  
  @keyframes edgeFade {
    0% { opacity: 1; }
    100% { opacity: 0; }
  }
  
  ::-webkit-scrollbar { display: none; }
</style>
</head>
<body>
  <div class="cosmic-time">
    <span class="symbol">Ω</span>
    <span class="number" id="cT">0000000000.00</span>
  </div>
  <div class="mystery-counter" id="mC"></div>
  <div class="cursor"></div>
  <div class="align-flash"></div>
  <div class="hidden-shape">
    <svg viewBox="0 0 100 100">
      <polygon points="50,10 90,90 10,90" />
    </svg>
  </div>
  <div class="corner-indicator tl"></div>
  <div class="corner-indicator tr"></div>
  <div class="corner-indicator bl"></div>
  <div class="corner-indicator br"></div>
  <div class="breath">
    <div class="core"></div>
  </div>
  
  <script>
    // Obfuscated variables
    const _0x0 = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o'];
    let _h = Math.random() * 360, _tH = _h, _ts = 1, _rr = 2;
    const _gC = (h,s,l,a) => `hsla(${h},${s}%,${l}%,${a})`;
    
    // Game state (obfuscated)
    const _gs = {
      a: 0, b: Date.now(), c: [], d: [], e: 0, f: false,
      g: [], h: null, i: [], j: Date.now(), k: [], l: 0,
      m: [], n: 0, o: [], p: [],
      q: JSON.parse(localStorage.getItem('_r') || '{}')
    };
    
    // Initialize counter
    function _uMC() {
      const c = document.getElementById('mC');
      c.innerHTML = _0x0.map((r, i) => {
        const d = _gs.q[r] ? 'completed' : '';
        return `<span class="rule-num ${d}" data-i="${i}">${i}</span>`;
      }).join('');
    }
    _uMC();
    
    // Complete rule with flash
    function _cR(id) {
      if (!_gs.q[id]) {
        _gs.q[id] = true;
        localStorage.setItem('_r', JSON.stringify(_gs.q));
        _uMC();
      }
      // Flash the number
      const idx = _0x0.indexOf(id);
      if (idx >= 0) {
        const el = document.querySelector(`.rule-num[data-i="${idx}"]`);
        if (el) {
          el.classList.remove('flash');
          void el.offsetWidth;
          el.classList.add('flash');
        }
      }
    }
    
    // Color system
    function _uC() {
      if (Math.random() < 0.01) _tH = (_tH + 30 + Math.random() * 60) % 360;
      const d = _tH - _h;
      _h += d * 0.001 * _ts;
      if (_h < 0) _h += 360;
      if (_h >= 360) _h -= 360;
      document.querySelector('.core').style.background = 
        `radial-gradient(circle,${_gC(_h,70,60,0.4)} 0%,${_gC(_h,60,40,0.1)} 50%,transparent 70%)`;
      requestAnimationFrame(_uC);
    }
    
    // Rings
    const _rs = [];
    function _cRs() {
      const b = document.querySelector('.breath');
      for (let i = 0; i < 8; i++) {
        const r = document.createElement('div');
        r.className = 'ring';
        const s = 150 + i * 50;
        r.style.cssText = `width:${s}px;height:${s}px;left:${i*-25}px;top:${i*-25}px;animation:breathe ${4+Math.random()*2}s ease-in-out infinite ${i*0.3}s`;
        b.appendChild(r);
        _rs.push({ el: r, bs: s, ho: i * 15, p: Math.random() * Math.PI * 2 });
      }
    }
    
    function _uRs() {
      const t = Date.now() / 1000 * _ts;
      _rs.forEach((r, i) => {
        const w = Math.sin(t * 0.5 + r.p) * 5;
        const sc = 1 + Math.sin(t * 0.3 + i) * 0.05;
        r.el.style.width = (r.bs + w) + 'px';
        r.el.style.height = (r.bs + w * 0.7) + 'px';
        r.el.style.transform = `rotate(${t * _rr + i * 10}deg) scale(${sc})`;
        r.el.style.borderColor = _gC((_h + r.ho + t * 2) % 360, 50, 50, 0.15 - i * 0.015);
      });
      requestAnimationFrame(_uRs);
    }
    
    // Particles (40 particles)
    const _ps = [];
    function _cPs() {
      for (let i = 0; i < 40; i++) {
        const p = document.createElement('div');
        p.className = 'particle';
        const s = 2 + Math.random() * 4;
        p.style.cssText = `width:${s}px;height:${s}px`;
        document.body.appendChild(p);
        _ps.push({
          el: p, x: Math.random() * window.innerWidth, y: Math.random() * window.innerHeight,
          vx: (Math.random() - 0.5) * 0.5, vy: -0.3 - Math.random() * 0.5,
          p: Math.random() * Math.PI * 2, ho: Math.random() * 60, s,
          cc: 0, ia: false, ap: null, wm: false
        });
      }
    }
    
    let _idl = 0; // idle counter
    function _uPs() {
      const t = Date.now() / 1000 * _ts;
      const cx = window.innerWidth / 2, cy = window.innerHeight / 2;
      
      // Check idle (no interaction for 3 seconds)
      const now = Date.now();
      if (now - _gs.b > 3000) {
        _idl++;
      } else {
        _idl = 0;
      }
      
      _ps.forEach(p => {
        // Organic motion
        const wx = Math.sin(t + p.p) * 0.8;
        const wy = Math.cos(t * 0.7 + p.p) * 0.3;
        p.vx += wx * 0.01;
        p.vy += wy * 0.01;
        
        // If idle, enter random wandering mode
        if (_idl > 0 && !p.ia) {
          p.wm = true;
          // Random direction changes
          if (Math.random() < 0.02) {
            p.vx += (Math.random() - 0.5) * 0.5;
            p.vy += (Math.random() - 0.5) * 0.5;
          }
        } else {
          p.wm = false;
          // Center attraction
          const dx = cx - p.x, dy = cy - p.y;
          const d = Math.sqrt(dx * dx + dy * dy);
          if (d > 100) {
            p.vx += dx / d * 0.005;
            p.vy += dy / d * 0.005;
          }
        }
        
        // Awakened follow cursor
        if (p.ia) {
          const ax = _mX - p.x, ay = _mY - p.y;
          const ad = Math.sqrt(ax * ax + ay * ay);
          p.vx += ax / ad * 0.15;
          p.vy += ay / ad * 0.15;
        }
        
        // Attraction point
        if (p.ap) {
          const ax = p.ap.x - p.x, ay = p.ap.y - p.y;
          const ad = Math.sqrt(ax * ax + ay * ay);
          if (ad > 20) {
            p.vx += ax / ad * 0.1;
            p.vy += ay / ad * 0.1;
          } else {
            p.ap = null;
          }
        }
        
        // Damping
        p.vx *= 0.99;
        p.vy *= 0.99;
        
        // Speed limit in wander mode
        if (p.wm) {
          const spd = Math.sqrt(p.vx * p.vx + p.vy * p.vy);
          if (spd > 1) {
            p.vx *= 0.95;
            p.vy *= 0.95;
          }
        }
        
        p.x += p.vx * _ts;
        p.y += p.vy * _ts;
        
        // Bounds
        if (p.x < -50) p.x = window.innerWidth + 50;
        if (p.x > window.innerWidth + 50) p.x = -50;
        if (p.y < -50) { p.y = window.innerHeight + 50; p.x = Math.random() * window.innerWidth; }
        
        p.el.style.left = p.x + 'px';
        p.el.style.top = p.y + 'px';
        
        const h = (_h + p.ho + t * 5) % 360;
        p.el.style.background = _gC(h, 60, p.ia ? 70 : 60, p.ia ? 0.8 : 0.4);
        p.el.style.color = _gC(h, 60, 70, 1);
      });
      
      // Check silence
      _cSl();
      
      requestAnimationFrame(_uPs);
    }
    
    // Cursor
    const _cr = document.querySelector('.cursor');
    const _tr = [];
    let _mX = window.innerWidth / 2, _mY = window.innerHeight / 2;
    
    function _iCr() {
      for (let i = 0; i < 12; i++) {
        const t = document.createElement('div');
        t.className = 'cursor-trail';
        t.style.opacity = (1 - i / 12) * 0.3;
        document.body.appendChild(t);
        _tr.push({ el: t, x: _mX, y: _mY });
      }
    }
    
    function _hM(x, y) {
      _mX = x; _mY = y;
      _gs.g.push({ x, y, t: Date.now() });
      const n = Date.now();
      _gs.g = _gs.g.filter(p => n - p.t < 1000);
      _cCr();
      _cEW(x, y);
      _cDi(x, y);
      _cCG(x, y);
      _cSC(x, y);
    }
    
    document.addEventListener('mousemove', e => _hM(e.clientX, e.clientY));
    document.addEventListener('touchmove', e => { e.preventDefault(); _hM(e.touches[0].clientX, e.touches[0].clientY); }, { passive: false });
    
    function _uCr() {
      _cr.style.left = _mX + 'px';
      _cr.style.top = _mY + 'px';
      _tr.forEach((t, i) => {
        const p = i === 0 ? { x: _mX, y: _mY } : _tr[i - 1];
        t.x += (p.x - t.x) * 0.15;
        t.y += (p.y - t.y) * 0.15;
        t.el.style.left = t.x + 'px';
        t.el.style.top = t.y + 'px';
      });
      requestAnimationFrame(_uCr);
    }
    
    // === RULES ===
    
    // R1: Combo
    function _cCb(x, y) {
      const n = Date.now();
      const d = n - _gs.a;
      if (d < 300) { _gs.a = n; _gs.b = n; }
      else { _gs.a = n; _gs.b = n; _gs.c = [1]; return; }
      if (++_gs.c[0] >= 5) { _tCb(x, y); _gs.c = [1]; }
    }
    
    function _tCb(x, y) {
      _cR(_0x0[0]);
      _rr = 8;
      setTimeout(() => _rr = 2, 2500);
      for (let i = 0; i < 5; i++) {
        setTimeout(() => {
          const b = document.createElement('div');
          b.className = 'combo-burst';
          b.style.cssText = `border-color:${_gC((_h+i*30)%360,70,60,0.7)};left:${x-150}px;top:${y-150}px;animation-delay:${i*0.1}s`;
          document.body.appendChild(b);
          setTimeout(() => b.remove(), 1000);
        }, i * 100);
      }
    }
    
    // R2: Rhythm (stable)
    function _cRh() {
      const n = Date.now(), d = n - _gs.j;
      _gs.j = n;
      if (d > 200 && d < 600) {
        _gs.i.push(d);
        if (_gs.i.length > 5) _gs.i.shift();
        if (_gs.i.length >= 3) {
          const l3 = _gs.i.slice(-3), av = l3.reduce((a,b) => a+b) / 3;
          if (l3.every(g => Math.abs(g - av) < av * 0.4)) {
            _tRh();
            _gs.i = [];
          }
        }
      } else if (d > 1000) {
        _gs.i = [];
      }
    }
    
    function _tRh() {
      _cR(_0x0[1]);
      _ps.forEach(p => p.ap = { x: window.innerWidth / 2, y: window.innerHeight / 2 });
    }
    
    // R3: Circle
    function _cCr() {
      if (_gs.g.length < 20) return;
      const ps = _gs.g, f = ps[0], l = ps[ps.length - 1];
      if (Math.sqrt((f.x-l.x)**2 + (f.y-l.y)**2) < 50) {
        const cx = window.innerWidth / 2, cy = window.innerHeight / 2;
        let qs = new Set();
        ps.forEach(p => {
          if (p.x < cx && p.y < cy) qs.add('tl');
          if (p.x > cx && p.y < cy) qs.add('tr');
          if (p.x < cx && p.y > cy) qs.add('bl');
          if (p.x > cx && p.y > cy) qs.add('br');
        });
        if (qs.size === 4) {
          _tVx((f.x+l.x)/2, (f.y+l.y)/2);
          _gs.g = [];
        }
      }
    }
    
    function _tVx(x, y) {
      _cR(_0x0[2]);
      for (let i = 0; i < 5; i++) {
        setTimeout(() => {
          const v = document.createElement('div');
          v.className = 'vortex';
          v.style.cssText = `border-color:${_gC((_h+i*40)%360,60,50,0.6)};left:${x-150}px;top:${y-150}px;animation-delay:${i*0.15}s`;
          document.body.appendChild(v);
          setTimeout(() => v.remove(), 2500);
        }, i * 150);
      }
    }
    
    // R4: Corners
    function _cCo(x, y) {
      const m = 80, w = window.innerWidth, h = window.innerHeight;
      let c = null;
      if (x < m && y < m) c = 'tl';
      else if (x > w - m && y < m) c = 'tr';
      else if (x < m && y > h - m) c = 'bl';
      else if (x > w - m && y > h - m) c = 'br';
      
      document.querySelectorAll('.corner-indicator').forEach(el => {
        el.classList.remove('active');
        el.style.background = _gC((_h+30)%360, 50, 50);
      });
      
      if (c) {
        document.querySelector(`.corner-indicator.${c}`).classList.add('active');
        if (_gs.d.length === 0 || _gs.d[_gs.d.length-1] !== c) {
          _gs.d.push(c);
          if (_gs.d.length >= 4) {
            const l4 = _gs.d.slice(-4);
            if (new Set(l4).size === 4) {
              _tHS();
              _gs.d = [];
            }
          }
        }
      }
    }
    
    function _tHS() {
      _cR(_0x0[3]);
      const s = document.querySelector('.hidden-shape');
      s.classList.add('visible');
      setTimeout(() => s.classList.remove('visible'), 2500);
    }
    
    // R5: Long press
    function _sLP() { _gs.e = Date.now(); _gs.f = true; }
    function _eLP() {
      if (_gs.f && Date.now() - _gs.e > 3000) _tST();
      _gs.f = false;
    }
    
    function _tST() {
      _cR(_0x0[4]);
      document.body.classList.add('slow-time');
      _ts = 0.3;
      setTimeout(() => { document.body.classList.remove('slow-time'); _ts = 1; }, 5500);
    }
    
    // R6: Awaken particle
    function _cPC(x, y) {
      for (let p of _ps) {
        if (Math.sqrt((p.x-x)**2 + (p.y-y)**2) < 30) {
          if (++p.cc >= 3 && !p.ia) {
            p.ia = true;
            p.el.classList.add('awakened');
            _cR(_0x0[5]);
            setTimeout(() => { p.ia = false; p.el.classList.remove('awakened'); p.cc = 0; }, 10000);
          }
          break;
        }
      }
    }
    
    // R7: Silence
    let _sb = 0.4, _sc = false;
    function _cSl() {
      const n = Date.now(), d = n - _gs.b;
      if (d > 5000) {
        _sb = Math.min(0.9, 0.4 + (d - 5000) / 10000);
        _ps.forEach(p => p.el.style.background = _gC((_h+p.ho)%360, 60, 60, _sb));
        if (_sb >= 0.9 && !_sc) { _cR(_0x0[6]); _sc = true; }
      } else { _sb = 0.4; _sc = false; }
    }
    
    // R8: Edge walk
    function _cEW(x, y) {
      const m = 30;
      const oe = (x < m) || (x > window.innerWidth - m) || (y < m) || (y > window.innerHeight - m);
      if (oe) {
        _gs.k.push({ x, y, t: Date.now() });
        const n = Date.now();
        _gs.k = _gs.k.filter(p => n - p.t < 2000);
        if (_gs.k.length > 30) { _tEG(); _gs.k = []; }
      } else { _gs.k = []; }
    }
    
    function _tEG() {
      _cR(_0x0[7]);
      const g = document.createElement('div');
      g.style.cssText = `position:fixed;inset:0;box-shadow:inset 0 0 150px ${_gC(_h,50,50,0.4)};pointer-events:none;animation:edgeFade 2.5s ease-out forwards`;
      document.body.appendChild(g);
      setTimeout(() => g.remove(), 2500);
    }
    
    // R9: Diagonal
    function _cDi(x, y) {
      const m = 60, w = window.innerWidth, h = window.innerHeight;
      const cs = { tl: {x:0,y:0}, tr: {x:w,y:0}, bl: {x:0,y:h}, br: {x:w,y:h} };
      Object.entries(cs).forEach(([n, p]) => {
        if (Math.abs(x - p.x) < m && Math.abs(y - p.y) < m) {
          if (!_gs.l) _gs.l = [];
          _gs.l.push({ c: n, t: Date.now() });
          const now = Date.now();
          _gs.l = _gs.l.filter(p => now - p.t < 3000);
          if (_gs.l.length >= 2) {
            const f = _gs.l[0].c, lt = _gs.l[_gs.l.length-1].c;
            if ((f==='tl'&&lt==='br')||(f==='br'&&lt==='tl')||(f==='tr'&&lt==='bl')||(f==='bl'&&lt==='tr')) {
              _tDP();
              _gs.l = [];
            }
          }
        }
      });
    }
    
    function _tDP() {
      _cR(_0x0[8]);
      const o = _rr;
      _rr = 0;
      setTimeout(() => _rr = o, 3500);
    }
    
    // R10: Center gaze
    function _cCG(x, y) {
      const cx = window.innerWidth / 2, cy = window.innerHeight / 2;
      const d = Math.sqrt((x-cx)**2 + (y-cy)**2);
      if (d < 50) {
        if (!_gs.m) _gs.m = Date.now();
        else if (Date.now() - _gs.m > 2000) { _tPV(); _gs.m = 0; }
      } else { _gs.m = 0; }
    }
    
    function _tPV() {
      _cR(_0x0[9]);
      _ps.forEach(p => p.el.style.opacity = '0');
      setTimeout(() => _ps.forEach(p => p.el.style.opacity = '1'), 1000);
    }
    
    // R11: Breath sync
    function _cBS() {
      const n = Date.now();
      _gs.n = n;
      _gs.o.push(n);
      _gs.o = _gs.o.filter(t => n - t < 20000);
      if (_gs.o.length >= 3) {
        const l3 = _gs.o.slice(-3), gs = [l3[1]-l3[0], l3[2]-l3[1]];
        if (gs.every(g => g > 3000 && g < 5000) && Math.abs(gs[0]-gs[1]) < 1500) {
          _tBS();
          _gs.o = [];
        }
      }
    }
    
    function _tBS() {
      _cR(_0x0[10]);
      _ps.forEach(p => p.ho = 0);
      setTimeout(() => _ps.forEach(p => p.ho = Math.random() * 60), 3500);
    }
    
    // R12: S curve
    function _cSC(x, y) {
      _gs.p.push({ x, y, t: Date.now() });
      const n = Date.now();
      _gs.p = _gs.p.filter(p => n - p.t < 2000);
      if (_gs.p.length > 30) {
        const ys = _gs.p.map(p => p.y);
        let ps = 0;
        for (let i = 1; i < ys.length - 1; i++) {
          if ((ys[i] > ys[i-1] && ys[i] > ys[i+1]) || (ys[i] < ys[i-1] && ys[i] < ys[i+1])) ps++;
        }
        if (ps >= 4) { _tSW(); _gs.p = []; }
      }
    }
    
    function _tSW() {
      _cR(_0x0[11]);
      _rs.forEach((r, i) => {
        r.el.style.transition = 'transform 0.5s ease';
        r.el.style.transform = `rotate(${Date.now()/1000*_rr}deg) skewX(${(i%2===0?1:-1)*15}deg)`;
        setTimeout(() => r.el.style.transition = '', 600);
      });
    }
    
    // R13: Triple pause
    function _cTP() {
      const n = Date.now(), d = n - _gs.b;
      if (d > 500 && d < 2000) {
        if (!_gs.h) _gs.h = [];
        _gs.h.push({ t: n, g: d });
        _gs.h = _gs.h.slice(-3);
        if (_gs.h.length === 3) {
          const gs = _gs.h.map(c => c.g), av = gs.reduce((a,b) => a+b) / 3;
          if (gs.every(g => Math.abs(g - av) < av * 0.3)) {
            _tTP();
            _gs.h = [];
          }
        }
      } else { _gs.h = []; }
    }
    
    function _tTP() {
      _cR(_0x0[12]);
      const c = document.querySelector('.core');
      let ct = 0;
      const iv = setInterval(() => {
        c.style.transform = `scale(${1 + (ct % 2) * 0.4})`;
        if (++ct >= 6) { clearInterval(iv); c.style.transform = ''; }
      }, 350);
    }
    
    // R14: Cosmic (100s)
    const _CE = new Date('2022-11-30T00:00:00Z').getTime();
    let _lr = 0;
    function _uCT() {
      const n = Date.now(), cs = (n - _CE) / 1000, fm = cs.toFixed(2);
      const pts = fm.split('.'), ip = pts[0].padStart(10, '0');
      document.getElementById('cT').textContent = ip + '.' + pts[1];
      const is = Math.floor(cs);
      if (is % 100 === 0 && is !== _lr) { _lr = is; _tCR(); }
      requestAnimationFrame(_uCT);
    }
    
    function _tCR() {
      _cR(_0x0[13]);
      const te = document.querySelector('.cosmic-time');
      te.style.color = 'rgba(255,255,255,0.7)';
      te.style.textShadow = '0 0 25px rgba(255,255,255,0.5)';
      _ps.forEach((p, i) => {
        setTimeout(() => {
          p.el.style.transform = 'scale(2.5)';
          setTimeout(() => p.el.style.transform = '', 250);
        }, i * 40);
      });
      setTimeout(() => {
        te.style.color = '';
        te.style.textShadow = '';
      }, 3500);
    }
    
    // R15: Random pulse
    function _rP() {
      if (Math.random() < 0.01) {
        _cR(_0x0[14]);
        const p = document.createElement('div');
        p.className = 'pulse';
        p.style.cssText = `left:${Math.random()*window.innerWidth}px;top:${Math.random()*window.innerHeight}px;border-color:${_gC((_h+Math.random()*120)%360,60,50,0.5)}`;
        document.body.appendChild(p);
        setTimeout(() => p.remove(), 2000);
      }
      requestAnimationFrame(_rP);
    }
    
    // Click handler
    function _hC(x, y) {
      _gs.b = Date.now();
      const r = document.createElement('div');
      r.className = 'ripple';
      r.style.cssText = `border-color:${_gC((_h+Math.random()*60)%360,70,60,0.6)};left:${x-300}px;top:${y-300}px`;
      document.body.appendChild(r);
      setTimeout(() => r.remove(), 2500);
      _cCb(x, y);
      _cRh();
      _cCo(x, y);
      _cPC(x, y);
      _cBS();
      _cTP();
    }
    
    document.addEventListener('mousedown', e => { _sLP(); _hC(e.clientX, e.clientY); });
    document.addEventListener('mouseup', _eLP);
    document.addEventListener('touchstart', e => {
      e.preventDefault();
      const t = e.touches[0];
      _mX = t.clientX; _mY = t.clientY;
      _sLP();
      _hC(t.clientX, t.clientY);
    }, { passive: false });
    document.addEventListener('touchend', _eLP);
    
    // Alignment
    let _la = 0;
    function _cA() {
      const t = Date.now() / 1000;
      if (t - _la > 20 && Math.random() < 0.001) {
        _la = t;
        const f = document.querySelector('.align-flash');
        f.classList.add('active');
        _rs.forEach(r => {
          r.el.style.animation = 'none';
          void r.el.offsetHeight;
          r.el.style.animation = 'breathe 4s ease-in-out infinite';
        });
        setTimeout(() => f.classList.remove('active'), 600);
      }
      requestAnimationFrame(_cA);
    }
    
    // Initialize
    _cRs();
    _cPs();
    _iCr();
    _uC();
    _uRs();
    _uPs();
    _uCr();
    _rP();
    _cA();
    _uCT();
  </script>
</body>
</html>
